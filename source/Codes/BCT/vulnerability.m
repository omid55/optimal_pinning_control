function V = vulnerability(G)
% Vulnerability vector for an undirected and unweighted graph G.
% The dimension of V is the number of edges in the network G.
%
% Mahdi Jalili, STU, 2010.
Eff = sum(sum(efficiency(G)))/(size(G,1)*(size(G,1)-1));
G = triu(G); Ed = find(G == 1);
V = zeros(1,length(Ed));
for i = 1:length(V)
    G1 = G;
    G1(Ed(i)) = 0;
    G1 = G1+G1';
    E = sum(sum(efficiency(G1)))/(size(G1,1)*(size(G1,1)-1));
    V(i) = (Eff-E)/Eff;
end