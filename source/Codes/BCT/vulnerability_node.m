function V = vulnerability_node(G)
% Node Vulnerability vector for an undirected and unweighted graph G.
% The dimension of V is the number of nodes in the network G.
%
% Mahdi Jalili, STU, 2010.
Eff = sum(sum(efficiency(G)))/(size(G,1)*(size(G,1)-1));
V = zeros(1,size(G,1));
for i = 1:size(G,1)
    G1 = G; G1(i,:) = []; G1(:,i) = [];
    E = sum(sum(efficiency(G1)))/(size(G1,1)*(size(G1,1)-1));
    V(i) = (Eff-E)/Eff;
end